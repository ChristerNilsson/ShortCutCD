// Generated by CoffeeScript 2.4.1
// W    A    S    D
// up   left down right
// undo +2   *2   /2
var Player, draw, keyPressed, players, setup, timestart;

Player = class Player {
  constructor(left, right, bg, keys) {
    this.left = left;
    this.right = right;
    this.bg = bg;
    this.keys = keys;
    this.start = 3;
    this.target = 2;
    this.history = [];
    this.tid = 0;
    this.middle = (this.left + this.right) / 2;
  }

  draw() {
    fill(this.bg);
    rect(this.left * width, 0, width / 2, height);
    fc(0);
    text(this.start, width * (this.middle - 0.10), 100);
    text(this.target, width * (this.middle + 0.10), 100);
    text(this.history.length, width * (this.middle - 0.10), 200);
    return text(this.tid / 1000, width * (this.middle + 0.10), 200);
  }

  operate(newValue) {
    this.history.push(this.start);
    return this.start = newValue;
  }

  click(key) {
    if (this.start === this.target) {
      return;
    }
    key = key.toUpperCase();
    if (key === this.keys[0] && this.history.length > 0) {
      this.start = this.history.pop();
    }
    if (key === this.keys[1]) {
      this.operate(this.start + 2);
    }
    if (key === this.keys[2]) {
      this.operate(this.start * 2);
    }
    if (key === this.keys[3] && this.start % 2 === 0) {
      this.operate(this.start / 2);
    }
    if (this.start === this.target) {
      return this.tid = (new Date()) - timestart;
    }
  }

};

timestart = new Date();

players = [];

setup = function() {
  createCanvas(windowWidth, windowHeight);
  players.push(new Player(0.00, 0.50, "#ff0", "W A S D".split(' '))); // ["W","A","S","D"]
  return players.push(new Player(0.50, 1.00, "#f00", "ARROWUP ARROWLEFT ARROWDOWN ARROWRIGHT".split(' ')));
};

//timestart = new Date()
draw = function() {
  var i, len, player, results;
  textSize(30);
//bg 0.5
  results = [];
  for (i = 0, len = players.length; i < len; i++) {
    player = players[i];
    results.push(player.draw());
  }
  return results;
};

keyPressed = function() {
  var i, len, player, results;
  console.log(keyCode, key);
  results = [];
  for (i = 0, len = players.length; i < len; i++) {
    player = players[i];
    results.push(player.click(key));
  }
  return results;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7QUFBQSxJQUFBLE1BQUEsRUFBQSxJQUFBLEVBQUEsVUFBQSxFQUFBLE9BQUEsRUFBQSxLQUFBLEVBQUE7O0FBSU0sU0FBTixNQUFBLE9BQUE7RUFDQyxXQUFjLEtBQUEsT0FBQSxJQUFBLE1BQUEsQ0FBQTtJQUFDLElBQUMsQ0FBQTtJQUFNLElBQUMsQ0FBQTtJQUFPLElBQUMsQ0FBQTtJQUFJLElBQUMsQ0FBQTtJQUNuQyxJQUFDLENBQUEsS0FBRCxHQUFTO0lBQ1QsSUFBQyxDQUFBLE1BQUQsR0FBVTtJQUNWLElBQUMsQ0FBQSxPQUFELEdBQVc7SUFDWCxJQUFDLENBQUEsR0FBRCxHQUFPO0lBQ1AsSUFBQyxDQUFBLE1BQUQsR0FBVSxDQUFDLElBQUMsQ0FBQSxJQUFELEdBQU0sSUFBQyxDQUFBLEtBQVIsQ0FBQSxHQUFlO0VBTFo7O0VBT2QsSUFBTyxDQUFBLENBQUE7SUFDTixJQUFBLENBQUssSUFBQyxDQUFBLEVBQU47SUFDQSxJQUFBLENBQUssSUFBQyxDQUFBLElBQUQsR0FBTSxLQUFYLEVBQWlCLENBQWpCLEVBQW1CLEtBQUEsR0FBTSxDQUF6QixFQUEyQixNQUEzQjtJQUNBLEVBQUEsQ0FBRyxDQUFIO0lBQ0EsSUFBQSxDQUFLLElBQUMsQ0FBQSxLQUFOLEVBQVksS0FBQSxHQUFNLENBQUMsSUFBQyxDQUFBLE1BQUQsR0FBUSxJQUFULENBQWxCLEVBQWlDLEdBQWpDO0lBQ0EsSUFBQSxDQUFLLElBQUMsQ0FBQSxNQUFOLEVBQWEsS0FBQSxHQUFNLENBQUMsSUFBQyxDQUFBLE1BQUQsR0FBUSxJQUFULENBQW5CLEVBQWtDLEdBQWxDO0lBQ0EsSUFBQSxDQUFLLElBQUMsQ0FBQSxPQUFPLENBQUMsTUFBZCxFQUFxQixLQUFBLEdBQU0sQ0FBQyxJQUFDLENBQUEsTUFBRCxHQUFRLElBQVQsQ0FBM0IsRUFBMEMsR0FBMUM7V0FDQSxJQUFBLENBQUssSUFBQyxDQUFBLEdBQUQsR0FBSyxJQUFWLEVBQWUsS0FBQSxHQUFNLENBQUMsSUFBQyxDQUFBLE1BQUQsR0FBUSxJQUFULENBQXJCLEVBQW9DLEdBQXBDO0VBUE07O0VBU1AsT0FBVSxDQUFDLFFBQUQsQ0FBQTtJQUNULElBQUMsQ0FBQSxPQUFPLENBQUMsSUFBVCxDQUFjLElBQUMsQ0FBQSxLQUFmO1dBQ0EsSUFBQyxDQUFBLEtBQUQsR0FBUztFQUZBOztFQUlWLEtBQVEsQ0FBQyxHQUFELENBQUE7SUFDUCxJQUFHLElBQUMsQ0FBQSxLQUFELEtBQVUsSUFBQyxDQUFBLE1BQWQ7QUFBMEIsYUFBMUI7O0lBQ0EsR0FBQSxHQUFNLEdBQUcsQ0FBQyxXQUFKLENBQUE7SUFDTixJQUFHLEdBQUEsS0FBTyxJQUFDLENBQUEsSUFBSyxDQUFBLENBQUEsQ0FBYixJQUFvQixJQUFDLENBQUEsT0FBTyxDQUFDLE1BQVQsR0FBa0IsQ0FBekM7TUFBZ0QsSUFBQyxDQUFBLEtBQUQsR0FBUyxJQUFDLENBQUEsT0FBTyxDQUFDLEdBQVQsQ0FBQSxFQUF6RDs7SUFDQSxJQUFHLEdBQUEsS0FBTyxJQUFDLENBQUEsSUFBSyxDQUFBLENBQUEsQ0FBaEI7TUFBd0IsSUFBQyxDQUFBLE9BQUQsQ0FBUyxJQUFDLENBQUEsS0FBRCxHQUFPLENBQWhCLEVBQXhCOztJQUNBLElBQUcsR0FBQSxLQUFPLElBQUMsQ0FBQSxJQUFLLENBQUEsQ0FBQSxDQUFoQjtNQUF3QixJQUFDLENBQUEsT0FBRCxDQUFTLElBQUMsQ0FBQSxLQUFELEdBQU8sQ0FBaEIsRUFBeEI7O0lBQ0EsSUFBRyxHQUFBLEtBQU0sSUFBQyxDQUFBLElBQUssQ0FBQSxDQUFBLENBQVosSUFBbUIsSUFBQyxDQUFBLEtBQUQsR0FBUyxDQUFULEtBQWMsQ0FBcEM7TUFBMkMsSUFBQyxDQUFBLE9BQUQsQ0FBUyxJQUFDLENBQUEsS0FBRCxHQUFPLENBQWhCLEVBQTNDOztJQUNBLElBQUcsSUFBQyxDQUFBLEtBQUQsS0FBVSxJQUFDLENBQUEsTUFBZDthQUEwQixJQUFDLENBQUEsR0FBRCxHQUFPLENBQUMsSUFBSSxJQUFKLENBQUEsQ0FBRCxDQUFBLEdBQWUsVUFBaEQ7O0VBUE87O0FBckJUOztBQThCQSxTQUFBLEdBQVksSUFBSSxJQUFKLENBQUE7O0FBQ1osT0FBQSxHQUFVOztBQUVWLEtBQUEsR0FBUSxRQUFBLENBQUEsQ0FBQTtFQUNQLFlBQUEsQ0FBYSxXQUFiLEVBQXlCLFlBQXpCO0VBQ0EsT0FBTyxDQUFDLElBQVIsQ0FBYSxJQUFJLE1BQUosQ0FBVyxJQUFYLEVBQWdCLElBQWhCLEVBQXNCLE1BQXRCLEVBQThCLFNBQVMsQ0FBQyxLQUFWLENBQWdCLEdBQWhCLENBQTlCLENBQWIsRUFEQTtTQUVBLE9BQU8sQ0FBQyxJQUFSLENBQWEsSUFBSSxNQUFKLENBQVcsSUFBWCxFQUFnQixJQUFoQixFQUFzQixNQUF0QixFQUE4Qix3Q0FBd0MsQ0FBQyxLQUF6QyxDQUErQyxHQUEvQyxDQUE5QixDQUFiO0FBSE8sRUFyQ1I7OztBQTJDQSxJQUFBLEdBQU8sUUFBQSxDQUFBLENBQUE7QUFDTixNQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsTUFBQSxFQUFBO0VBQUEsUUFBQSxDQUFTLEVBQVQsRUFBQTs7QUFFQTtFQUFBLEtBQUEseUNBQUE7O2lCQUNDLE1BQU0sQ0FBQyxJQUFQLENBQUE7RUFERCxDQUFBOztBQUhNOztBQU1QLFVBQUEsR0FBWSxRQUFBLENBQUEsQ0FBQTtBQUNYLE1BQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUE7RUFBQSxPQUFPLENBQUMsR0FBUixDQUFZLE9BQVosRUFBb0IsR0FBcEI7QUFDQTtFQUFBLEtBQUEseUNBQUE7O2lCQUNDLE1BQU0sQ0FBQyxLQUFQLENBQWEsR0FBYjtFQURELENBQUE7O0FBRlciLCJzb3VyY2VzQ29udGVudCI6WyIjIFcgICAgQSAgICBTICAgIERcclxuIyB1cCAgIGxlZnQgZG93biByaWdodFxyXG4jIHVuZG8gKzIgICAqMiAgIC8yXHJcblxyXG5jbGFzcyBQbGF5ZXJcclxuXHRjb25zdHJ1Y3RvciA6IChAbGVmdCwgQHJpZ2h0LCBAYmcsIEBrZXlzKSAtPlxyXG5cdFx0QHN0YXJ0ID0gM1xyXG5cdFx0QHRhcmdldCA9IDJcclxuXHRcdEBoaXN0b3J5ID0gW11cclxuXHRcdEB0aWQgPSAwXHJcblx0XHRAbWlkZGxlID0gKEBsZWZ0K0ByaWdodCkvMlxyXG5cclxuXHRkcmF3IDogLT5cclxuXHRcdGZpbGwgQGJnXHJcblx0XHRyZWN0IEBsZWZ0KndpZHRoLDAsd2lkdGgvMixoZWlnaHRcclxuXHRcdGZjIDBcclxuXHRcdHRleHQgQHN0YXJ0LHdpZHRoKihAbWlkZGxlLTAuMTApLDEwMFxyXG5cdFx0dGV4dCBAdGFyZ2V0LHdpZHRoKihAbWlkZGxlKzAuMTApLDEwMFxyXG5cdFx0dGV4dCBAaGlzdG9yeS5sZW5ndGgsd2lkdGgqKEBtaWRkbGUtMC4xMCksMjAwXHJcblx0XHR0ZXh0IEB0aWQvMTAwMCx3aWR0aCooQG1pZGRsZSswLjEwKSwyMDBcclxuXHJcblx0b3BlcmF0ZSA6IChuZXdWYWx1ZSkgLT5cclxuXHRcdEBoaXN0b3J5LnB1c2ggQHN0YXJ0XHJcblx0XHRAc3RhcnQgPSBuZXdWYWx1ZVxyXG5cclxuXHRjbGljayA6IChrZXkpIC0+XHJcblx0XHRpZiBAc3RhcnQgPT0gQHRhcmdldCB0aGVuIHJldHVyblxyXG5cdFx0a2V5ID0ga2V5LnRvVXBwZXJDYXNlKClcclxuXHRcdGlmIGtleSA9PSBAa2V5c1swXSBhbmQgQGhpc3RvcnkubGVuZ3RoID4gMCB0aGVuIEBzdGFydCA9IEBoaXN0b3J5LnBvcCgpXHJcblx0XHRpZiBrZXkgPT0gQGtleXNbMV0gdGhlblx0QG9wZXJhdGUgQHN0YXJ0KzJcclxuXHRcdGlmIGtleSA9PSBAa2V5c1syXSB0aGVuXHRAb3BlcmF0ZSBAc3RhcnQqMlxyXG5cdFx0aWYga2V5PT0gQGtleXNbM10gYW5kIEBzdGFydCAlIDIgPT0gMCB0aGVuIEBvcGVyYXRlIEBzdGFydC8yXHJcblx0XHRpZiBAc3RhcnQgPT0gQHRhcmdldCB0aGVuIEB0aWQgPSAobmV3IERhdGUoKSkgLSB0aW1lc3RhcnRcclxuXHJcbnRpbWVzdGFydCA9IG5ldyBEYXRlKClcclxucGxheWVycyA9IFtdXHJcblxyXG5zZXR1cCA9IC0+XHJcblx0Y3JlYXRlQ2FudmFzIHdpbmRvd1dpZHRoLHdpbmRvd0hlaWdodFxyXG5cdHBsYXllcnMucHVzaCBuZXcgUGxheWVyIDAuMDAsMC41MCwgXCIjZmYwXCIsIFwiVyBBIFMgRFwiLnNwbGl0ICcgJyAjIFtcIldcIixcIkFcIixcIlNcIixcIkRcIl1cclxuXHRwbGF5ZXJzLnB1c2ggbmV3IFBsYXllciAwLjUwLDEuMDAsIFwiI2YwMFwiLCBcIkFSUk9XVVAgQVJST1dMRUZUIEFSUk9XRE9XTiBBUlJPV1JJR0hUXCIuc3BsaXQgJyAnXHJcblx0I3RpbWVzdGFydCA9IG5ldyBEYXRlKClcclxuXHJcbmRyYXcgPSAtPlxyXG5cdHRleHRTaXplIDMwXHJcblx0I2JnIDAuNVxyXG5cdGZvciBwbGF5ZXIgaW4gcGxheWVyc1xyXG5cdFx0cGxheWVyLmRyYXcoKVxyXG5cdFxyXG5rZXlQcmVzc2VkID0oKS0+XHJcblx0Y29uc29sZS5sb2cga2V5Q29kZSxrZXlcclxuXHRmb3IgcGxheWVyIGluIHBsYXllcnNcclxuXHRcdHBsYXllci5jbGljayBrZXkgXHJcblxyXG4iXX0=
//# sourceURL=c:\github\ShortCutCD\coffee\sketch.coffee