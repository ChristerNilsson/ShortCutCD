// Generated by CoffeeScript 2.4.1
// W    A    S    D
// up   left down right
// undo +2   *2   /2
var Player, draw, keyPressed, players, setup, timestart;

Player = class Player {
  constructor(left, right, bg, keys) {
    this.left = left;
    this.right = right;
    this.bg = bg;
    this.keys = keys;
    this.start = 3;
    this.target = 2;
    this.history = [];
    this.tid = 0;
    this.middle = (this.left + this.right) / 2;
  }

  draw() {
    fill(this.bg);
    rect(this.left * width, 0, width / 2, height);
    fc(0);
    text(this.start, width * (this.middle - 0.10), 100);
    text(this.target, width * (this.middle + 0.10), 100);
    text(this.history.length, width * (this.middle - 0.10), 200);
    text(this.tid / 1000, width * (this.middle + 0.10), 200);
    return this.help();
  }

  help() {
    return text(this.keys[0]);
  }

  operate(newValue) {
    this.history.push(this.start);
    return this.start = newValue;
  }

  click(key) {
    if (this.start === this.target) {
      return;
    }
    key = key.toUpperCase();
    if (key === this.keys[0] && this.history.length > 0) {
      this.start = this.history.pop();
    }
    if (key === this.keys[1]) {
      this.operate(this.start + 2);
    }
    if (key === this.keys[2]) {
      this.operate(this.start * 2);
    }
    if (key === this.keys[3] && this.start % 2 === 0) {
      this.operate(this.start / 2);
    }
    if (this.start === this.target) {
      return this.tid = (new Date()) - timestart;
    }
  }

};

timestart = new Date();

players = [];

setup = function() {
  createCanvas(windowWidth, windowHeight);
  players.push(new Player(0.00, 0.50, "#ff0", "W A S D".split(' '))); // ["W","A","S","D"]
  return players.push(new Player(0.50, 1.00, "#f00", "ARROWUP ARROWLEFT ARROWDOWN ARROWRIGHT".split(' ')));
};

//timestart = new Date()
draw = function() {
  var i, len, player, results;
  textSize(30);
//bg 0.5
  results = [];
  for (i = 0, len = players.length; i < len; i++) {
    player = players[i];
    results.push(player.draw());
  }
  return results;
};

keyPressed = function() {
  var i, len, player, results;
  console.log(keyCode, key);
  results = [];
  for (i = 0, len = players.length; i < len; i++) {
    player = players[i];
    results.push(player.click(key));
  }
  return results;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7QUFBQSxJQUFBLE1BQUEsRUFBQSxJQUFBLEVBQUEsVUFBQSxFQUFBLE9BQUEsRUFBQSxLQUFBLEVBQUE7O0FBSU0sU0FBTixNQUFBLE9BQUE7RUFDQyxXQUFjLEtBQUEsT0FBQSxJQUFBLE1BQUEsQ0FBQTtJQUFDLElBQUMsQ0FBQTtJQUFNLElBQUMsQ0FBQTtJQUFPLElBQUMsQ0FBQTtJQUFJLElBQUMsQ0FBQTtJQUNuQyxJQUFDLENBQUEsS0FBRCxHQUFTO0lBQ1QsSUFBQyxDQUFBLE1BQUQsR0FBVTtJQUNWLElBQUMsQ0FBQSxPQUFELEdBQVc7SUFDWCxJQUFDLENBQUEsR0FBRCxHQUFPO0lBQ1AsSUFBQyxDQUFBLE1BQUQsR0FBVSxDQUFDLElBQUMsQ0FBQSxJQUFELEdBQU0sSUFBQyxDQUFBLEtBQVIsQ0FBQSxHQUFlO0VBTFo7O0VBT2QsSUFBTyxDQUFBLENBQUE7SUFDTixJQUFBLENBQUssSUFBQyxDQUFBLEVBQU47SUFDQSxJQUFBLENBQUssSUFBQyxDQUFBLElBQUQsR0FBTSxLQUFYLEVBQWlCLENBQWpCLEVBQW1CLEtBQUEsR0FBTSxDQUF6QixFQUEyQixNQUEzQjtJQUNBLEVBQUEsQ0FBRyxDQUFIO0lBQ0EsSUFBQSxDQUFLLElBQUMsQ0FBQSxLQUFOLEVBQVksS0FBQSxHQUFNLENBQUMsSUFBQyxDQUFBLE1BQUQsR0FBUSxJQUFULENBQWxCLEVBQWlDLEdBQWpDO0lBQ0EsSUFBQSxDQUFLLElBQUMsQ0FBQSxNQUFOLEVBQWEsS0FBQSxHQUFNLENBQUMsSUFBQyxDQUFBLE1BQUQsR0FBUSxJQUFULENBQW5CLEVBQWtDLEdBQWxDO0lBQ0EsSUFBQSxDQUFLLElBQUMsQ0FBQSxPQUFPLENBQUMsTUFBZCxFQUFxQixLQUFBLEdBQU0sQ0FBQyxJQUFDLENBQUEsTUFBRCxHQUFRLElB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RlciLCJzb3VyY2VzQ29udGVudCI6WyIjIFcgICAgQSAgICBTICAgIERcclxuIyB1cCAgIGxlZnQgZG93biByaWdodFxyXG4jIHVuZG8gKzIgICAqMiAgIC8yXHJcblxyXG5jbGFzcyBQbGF5ZXJcclxuXHRjb25zdHJ1Y3RvciA6IChAbGVmdCwgQHJpZ2h0LCBAYmcsIEBrZXlzKSAtPlxyXG5cdFx0QHN0YXJ0ID0gM1xyXG5cdFx0QHRhcmdldCA9IDJcclxuXHRcdEBoaXN0b3J5ID0gW11cclxuXHRcdEB0aWQgPSAwXHJcblx0XHRAbWlkZGxlID0gKEBsZWZ0K0ByaWdodCkvMlxyXG5cclxuXHRkcmF3IDogLT5cclxuXHRcdGZpbGwgQGJnXHJcblx0XHRyZWN0IEBsZWZ0KndpZHRoLDAsd2lkdGgvMixoZWlnaHRcclxuXHRcdGZjIDBcclxuXHRcdHRleHQgQHN0YXJ0LHdpZHRoKihAbWlkZGxlLTAuMTApLDEwMFxyXG5cdFx0dGV4dCBAdGFyZ2V0LHdpZHRoKihAbWlkZGxlKzAuMTApLDEwMFxyXG5cdFx0dGV4dCBAaGlzdG9yeS5sZW5ndGgsd2lkdGgqKEBtaWRkbGUtMC4xMCksMjAwXHJcblx0XHR0ZXh0IEB0aWQvMTAwMCx3aWR0aCooQG1pZGRsZSswLjEwKSwyMDBcclxuXHJcblx0XHRAaGVscCgpXHJcblxyXG5cdGhlbHAgOiAtPlxyXG5cdFx0dGV4dCBAa2V5c1swXVxyXG5cclxuXHRvcGVyYXRlIDogKG5ld1ZhbHVlKSAtPlxyXG5cdFx0QGhpc3RvcnkucHVzaCBAc3RhcnRcclxuXHRcdEBzdGFydCA9IG5ld1ZhbHVlXHJcblxyXG5cdGNsaWNrIDogKGtleSkgLT5cclxuXHRcdGlmIEBzdGFydCA9PSBAdGFyZ2V0IHRoZW4gcmV0dXJuXHJcblx0XHRrZXkgPSBrZXkudG9VcHBlckNhc2UoKVxyXG5cdFx0aWYga2V5ID09IEBrZXlzWzBdIGFuZCBAaGlzdG9yeS5sZW5ndGggPiAwIHRoZW4gQHN0YXJ0ID0gQGhpc3RvcnkucG9wKClcclxuXHRcdGlmIGtleSA9PSBAa2V5c1sxXSB0aGVuXHRAb3BlcmF0ZSBAc3RhcnQrMlxyXG5cdFx0aWYga2V5ID09IEBrZXlzWzJdIHRoZW5cdEBvcGVyYXRlIEBzdGFydCoyXHJcblx0XHRpZiBrZXk9PSBAa2V5c1szXSBhbmQgQHN0YXJ0ICUgMiA9PSAwIHRoZW4gQG9wZXJhdGUgQHN0YXJ0LzJcclxuXHRcdGlmIEBzdGFydCA9PSBAdGFyZ2V0IHRoZW4gQHRpZCA9IChuZXcgRGF0ZSgpKSAtIHRpbWVzdGFydFxyXG5cclxudGltZXN0YXJ0ID0gbmV3IERhdGUoKVxyXG5wbGF5ZXJzID0gW11cclxuXHJcbnNldHVwID0gLT5cclxuXHRjcmVhdGVDYW52YXMgd2luZG93V2lkdGgsd2luZG93SGVpZ2h0XHJcblx0cGxheWVycy5wdXNoIG5ldyBQbGF5ZXIgMC4wMCwwLjUwLCBcIiNmZjBcIiwgXCJXIEEgUyBEXCIuc3BsaXQgJyAnICMgW1wiV1wiLFwiQVwiLFwiU1wiLFwiRFwiXVxyXG5cdHBsYXllcnMucHVzaCBuZXcgUGxheWVyIDAuNTAsMS4wMCwgXCIjZjAwXCIsIFwiQVJST1dVUCBBUlJPV0xFRlQgQVJST1dET1dOIEFSUk9XUklHSFRcIi5zcGxpdCAnICdcclxuXHQjdGltZXN0YXJ0ID0gbmV3IERhdGUoKVxyXG5cclxuZHJhdyA9IC0+XHJcblx0dGV4dFNpemUgMzBcclxuXHQjYmcgMC41XHJcblx0Zm9yIHBsYXllciBpbiBwbGF5ZXJzXHJcblx0XHRwbGF5ZXIuZHJhdygpXHJcblx0XHJcbmtleVByZXNzZWQgPSgpLT5cclxuXHRjb25zb2xlLmxvZyBrZXlDb2RlLGtleVxyXG5cdGZvciBwbGF5ZXIgaW4gcGxheWVyc1xyXG5cdFx0cGxheWVyLmNsaWNrIGtleSBcclxuXHJcbiJdfQ==
//# sourceURL=c:\github\ShortCutCD\coffee\sketch.coffee